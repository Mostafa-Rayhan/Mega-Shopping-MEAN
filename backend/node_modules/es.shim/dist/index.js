Object.empty||Object.defineProperty(Object,"empty",{value:function(t){try{for(let e in t)return!1}catch(e){}return!0}});Object.prototype.toParams||Object.defineProperty(Object.prototype,"toParams",{value:function(){var t="";for(let e in this)this[e]!==void 0&&(t+=`&${e}=${this[e]}`);return t.slice(1)}});Object.defineProperty(Array.prototype,"flat",{value:function(t=1,e=[]){for(let r of this)Array.isArray(r)&&t>0?r.flat(t-1,e):e.push(r);return e},writable:!0});Object.defineProperty(Array.prototype,"flatMap",{value:function(t){return this.map(t).flat()},writable:!0});Array.prototype.at||Object.defineProperty(Array.prototype,"at",{value:function(t){var e=+t;return e<0&&(e+=this.length),this[e]},writable:!0});Array.prototype.findLast||(Object.defineProperty(Array.prototype,"findLast",{value:function(t){let e=this.length;for(;e>0;){let r=this[--e];if(t(r,e))return r}},writable:!0}),Object.defineProperty(Array.prototype,"findLastIndex",{value:function(t){let e=this.length;for(;e>0;){let r=this[--e];if(t(r,e))return e}return-1},writable:!0}));String.prototype.splice||Object.defineProperty(String.prototype,"splice",{value:function(t,e,r){let i=this.length,o=arguments.length;if(r=r===void 0?"":r,o<1)return this;if(t<0&&(Math.abs(t)>=i?t=0:t=i+t),o===1)return this.slice(0,t);{e-=0;let n=this.slice(0,t),a=this.slice(t+e);return n+r+a}}});String.prototype.htmlspecialchars||Object.defineProperty(String.prototype,"htmlspecialchars",{value:function(t){let e=this.replace(/&(?!\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return t==="ENT_QUOTES"?e.replace(/"/g,"&quot;").replace(/'/g,"&#39;"):t==="ENT_NOQUOTES"?e:e.replace(/"/g,"&quot;")}});String.prototype.tohtml||Object.defineProperty(String.prototype,"tohtml",{value:function(){return this.replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').replace(/&#39;/g,"'").replace(/&amp;/gi,"&")}});String.prototype.xss||Object.defineProperty(String.prototype,"xss",{value:function(){let t=this.htmlspecialchars("ENT_QUOTES");return t=t.replace(/(document\.cookie)|(document\.write)|(\.parentNode)|(window\.location)|(\.innerHTML)/g,"").replace(/(%0[0-8bcef])|(%1[0-9a-f])/g,""),t}});String.prototype.escape||Object.defineProperty(String.prototype,"escape",{value:function(){return this.replace(/('|"|&|\\|\}|\{|\(|\)|;|=|\,|&)/g,"\\$1")}});String.prototype.at||Object.defineProperty(String.prototype,"at",{value:function(t){var e=+t;return e<0&&(e+=this.length),this[e]},writable:!0});String.prototype.toJson||Object.defineProperty(String.prototype,"toJson",{value:function(){var t=this.replace(/^\?/,""),e=decodeURIComponent(t).split("&").filter(i=>i).map(i=>i.split("=")),r={};for(let i of e)r[i[0]]=i[1]||"";return r}});Number.parse||Object.defineProperty(Number,"parse",{value:function(t){return typeof t=="number"||typeof t=="string"?(t+="",t.startsWith("0")&&!t.startsWith("0.")?t==="0"?0:t:(isFinite(t)&&t>=Number.MIN_SAFE_INTEGER&&t<=Number.MAX_SAFE_INTEGER&&(t=+t),t)):t}});Number.fromString||Object.defineProperty(Number,"fromString",{value:function(t){return+t||0}});Date.isDate||Object.defineProperty(Date,"isDate",{value:function(t){return!!(t&&typeof t=="object"&&t.getTime)},writable:!0});Date.prototype.getFullWeek||(Object.defineProperty(Date.prototype,"getFullWeek",{value:function(){let t=this.getFullYear(),e=new Date(t,0,1),r=e.getDay(),i=(this-e)/24/360/1e3;return Math.ceil((i+r)/7)}}),Object.defineProperty(Date.prototype,"getWeek",{value:function(){let t=this.getDate(),e=this.getMonth(),r=this.getFullYear(),i=new Date(r,e,1).getDay();return Math.ceil((t+i)/7)}}));Date.prototype.format||Object.defineProperty(Date.prototype,"format",{value:function(t){var e={fullyear:this.getFullYear(),year:this.getYear(),fullweek:this.getFullWeek(),week:this.getWeek(),month:this.getMonth()+1,date:this.getDate(),day:this.getDay()+1,hours:this.getHours(),minutes:this.getMinutes(),seconds:this.getSeconds()},r=null;t=t||"Y-m-d H:i:s",e.g=e.hours>12?e.hours-12:e.hours,r={Y:e.fullyear,y:e.year,m:e.month<10?"0"+e.month:e.month,n:e.month,d:e.date<10?"0"+e.date:e.date,j:e.date,H:e.hours<10?"0"+e.hours:e.hours,h:e.g<10?"0"+e.g:e.g,G:e.hours,g:e.g,i:e.minutes<10?"0"+e.minutes:e.minutes,s:e.seconds<10?"0"+e.seconds:e.seconds,W:e.fullweek,w:e.week,D:e.day};for(let i in r)t=t.replace(new RegExp(i,"g"),r[i]);return t}});Promise.defer||(Promise.defer=function(){let t={};return t.promise=new Promise((e,r)=>{t.resolve=e,t.reject=r}),t});
